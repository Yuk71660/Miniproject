<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.miniproject.mapper.rboardmapper">
   <!-- 게시글 전체 리스트 -->
   <select id="getEntireRBoard"
      resultType="com.miniproject.model.RBoard">
      select * from rboard
      <choose>
         <when test="searchType != null">
            <choose>
               <when test="searchType == 'title'">
                  where title like #{searchWord}
               </when>
               <when test="searchType == 'writer'">
                  where writer like #{searchWord}
               </when>
               <when test="searchType == 'content'">
                  where content like #{searchWord}
               </when>
            </choose>
         </when>
      </choose>
      order by postDate desc limit #{startRowIndex}, #{rowCntPerPage}
   </select>

   <select id="getTotalCountRow" resultType="int">
      select count(*) from
      rboard
   </select>

   <select id="getSearchResultCountRow" resultType="int">
      select count(*) from rboard
      <choose>
         <when test="searchType == 'title'">
            where title like #{searchWord}
         </when>
         <when test="searchType == 'writer'">
            where writer like #{searchWord}
         </when>
         <when test="searchType == 'content'">
            where content like #{searchWord}
         </when>
      </choose>
   </select>
   
</mapper>